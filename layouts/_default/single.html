{{ define "main" }}

<!-- masthead -->
{{ .Render "cc-masthead" }}

<!-- date -->
{{ if .Date }}
<section class="cc-date-section">
    <p>
      <em class="cc-date">{{ .Date.Format "Monday, January 2, 2006" }}</em>
    </p>
</section>
{{ end }}

<!-- content -->
<section class="cc-content-section">
  {{ .Content }}
</section>

<!-- tagged -->
<section class="cc-related-section">
  <ul>
    <!-- related -->
    {{ range .Params.related }}
      <li>{{ partialCached "cc-card-for" . . }}</li>
    {{ end }}
    <!-- tagged with this page title -->
    {{ $pages := partial "cc-get-tagged" .Title }}
    {{ if $pages }}
      {{ range sort $pages "Title" }}
      <li>{{ .Render "cc-card" }}</li>
      {{ end }}
    {{ end }}
  </ul>
</section>

<!-- sections -->
{{ $skip := slice
    "attribution"
    "date"
    "draft"
    "excerpt"
    "iscjklanguage"
    "lastmod"
    "next"
    "picture"
    "publish"
    "publishdate"
    "published"
    "quote"
    "related"
    "snippets"
    "spotify"
    "thumbnail"
    "title"
    "type"
    "url"
    "website"
    "alt"
    "caption" -}}
{{ range $k, $v := .Params -}}
  {{ if not (in $skip $k) -}}
    {{ partial "cc-section" (dict "key" $k "value" $v) }}
  {{ end -}}
{{- end }}

{{ end }}
