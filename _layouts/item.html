---
layout: root
---
{% comment -%}
=============================================================================
hashtag-lookup intialization
-----------------------------------------------------------------------------
The next expression creates an array for fast reverse-lookup of documents
that have a hashtag property. A hashtag is a string such as "star" that
uniquely identifies a topic or concept. When a document tags "star", this
structure is used to find the associated document.

The resulting array looks like the following:

  - name: "star"
    items: 
      - page
      - page
  - name: "human-being"
    items:
      - page

Ideally each hashtag should only have a single associated page, otherwise
such a tag will not link to a unique page and may cause confusion. In these
cases the layout will link to each associated page.
=============================================================================
{% endcomment -%}
{% assign hashtag-lookup = site.documents | group_by_exp: "item", "item.hashtag | default: item.title | slugify" -%}

{% comment -%}
=============================================================================
content section
-----------------------------------------------------------------------------
The next section contains the body content of the page.
=============================================================================
{% endcomment -%}
<section class="cc-content">
{{ content }}
</section>

{% comment -%}
=============================================================================
reverse-tagged section
-----------------------------------------------------------------------------
The next section generates a card for each page that tags this page. This is
rendered only if the page has a hashtag defined for perf reasons.
=============================================================================
{% endcomment -%}
{% if page.hashtag -%}
<section class="hashtag-section">
  <ul class="cc-card-list">
    {% for doc in site.documents -%}
        {%- for tag in doc.tags -%}
            {%- assign slugged = tag | slugify -%}
            {%- if slugged == page.hashtag -%}
                <li class="cc-card-list-item">{% include cc-view item=doc view="card" %}</li>
                {%- break -%}
            {%- endif -%}
        {%- endfor -%}
    {%- endfor -%}
  </ul>  
</section>
{% endif %}

{% comment -%}
=============================================================================
sections
=============================================================================
{% endcomment -%}

{% if page.tags.size > 0 -%}
{%   include cc-section item=page heading="tags" prop="tags" view="chip" -%}
{% endif -%}

{% if page.after.size > 0 -%}
{%   include cc-section item=page heading="after" prop="after" view="chip" -%}
{% endif -%}

{% if page.before.size > 0 -%}
{%   include cc-section item=page heading="before" prop="before" view="chip" -%}
{% endif -%}

{% if page.borders.size > 0 -%}
{%   include cc-section item=page heading="borders" prop="borders" view="chip" -%}
{% endif -%}

{% if page.born-on -%}
{%   include cc-section-date item=page heading="born on" prop="born-on" -%}
{% endif -%}

{% if page.capital.size > 0 -%}
{%   include cc-section item=page heading="capital" prop="capital" view="chip" -%}
{% endif -%}

{% if page.cities.size > 0 -%}
{%   include cc-section item=page heading="cities" prop="cities" view="chip" -%}
{% endif -%}

{% if page.constellation.size > 0 -%}
{%   include cc-section item=page heading="constellation" prop="constellation" view="chip" -%}
{% endif -%}

{% if page.contains.size > 0 -%}
{%   include cc-section item=page heading="contains" prop="contains" view="chip" -%}
{% endif -%}

{% if page.counties.size > 0 -%}
{%   include cc-section item=page heading="counties" prop="counties" view="chip" -%}
{% endif -%}

{% if page.country.size > 0 -%}
{%   include cc-section item=page heading="country" prop="country" view="chip" -%}
{% endif -%}

{% if page.county.size > 0 -%}
{%   include cc-section item=page heading="county" prop="county" view="chip" -%}
{% endif -%}

{% if page.county-seat.size > 0 -%}
{%   include cc-section item=page heading="county seat" prop="county-seat" view="chip" -%}
{% endif -%}

{% if page.died-on -%}
{%   include cc-section-date heading="died on" item=page prop="died-on" -%}
{% endif -%}

{% if page.directed-by.size > 0 -%}
{%   include cc-section item=page heading="directed by" prop="directed-by" view="chip" -%}
{% endif -%}

{% if page.flags.size > 0 -%}
{%   include cc-section item=page heading="flags" prop="flags" view="card" -%}
{% endif -%}

{% if page.from.size > 0 -%}
{%   include cc-section item=page heading="from" prop="from" view="chip" -%}
{% endif -%}

{% if page.genre.size > 0 -%}
{%   include cc-section item=page heading="genre" prop="genre" view="card" -%}
{% endif -%}

{% if page.location.size > 0 -%}
{%   include cc-section item=page heading="location" prop="location" view="chip" -%}
{% endif -%}

{% if page.near.size > 0 -%}
{%   include cc-section item=page heading="near" prop="near" view="card" -%}
{% endif -%}

{% if page.neighborhoods.size > 0 -%}
{%   include cc-section item=page heading="neighborhoods" prop="neighborhoods" view="chip" -%}
{% endif -%}

{% if page.opposite.size > 0 -%}
{%   include cc-section item=page heading="opposite" prop="opposite" view="chip" -%}
{% endif -%}

{% if page.orbits.size > 0 -%}
{%   include cc-section item=page heading="orbits" prop="orbits" view="chip" -%}
{% endif -%}

{% if page.state.size > 0 -%}
{%   include cc-section item=page heading="state" prop="state" view="chip" -%}
{% endif -%}

{% if page.stars.size > 0 -%}
{%   include cc-section item=page heading="stars" prop="stars" view="chip" -%}
{% endif -%}

{% if page.states.size > 0 -%}
{%   include cc-section item=page heading="states" prop="states" view="chip" -%}
{% endif -%}

{% if page.subdivision-of.size > 0 -%}
{%   include cc-section item=page heading="subdivision of" prop="subdivision-of" view="chip" -%}
{% endif -%}

{% if page.type-of.size > 0 -%}
{%   include cc-section item=page heading="type of" prop="type-of" view="chip" -%}
{% endif -%}

{% if page.related.size > 0 -%}
{%   include cc-section item=page heading="related" prop="related" view="card" -%}
{% endif -%}

{% if page.footer.size > 0 -%}
{%   include cc-section item=page header="finis" prop="footer" view="card" -%}
{% endif -%}

{% comment -%}
=============================================================================
footer
=============================================================================
{% endcomment -%}
<section class="home-link-section">
  <a href="/index.html">
    <div class="card">Home</div>
  </a>
</section>