{% comment %}
#
#  The if statement does not resolve a reference to include.linked.
#  However, it works if include.linked is assigned to a variable.
#
{% endcomment %}
{% assign linked = include.linked %}

{% comment %}
#
# Find the document that matches the path specified in the linked variable.
#
{% endcomment %}
{%- for p in site.documents -%}
  {%- if p.path == linked -%}
      <a href="{{p.url}}" class="card-link">
      {% case p.layout %}
        {% when "cue" %}
          {% assign cue=p.cue | default: p.title %}
          {% include cue-card.html cue=cue %}
        {% when "hashtag" %}
          {% assign hashtag=p.hashtag | default: p.title %}
          {% include hashtag-card.html hashtag=hashtag %}
        {% when "person" %}
          {% include person-card.html person=p.person %}
        {% when "quote" %}
          {% assign quote=p.quote | default: p.title %}
          {% include quote-card.html quote=quote attribution=p.attribution %}
        {% when "single" %}
          {% include post-card.html post=p %}
        {% when "task" %}
          {% assign task = p.task | default: p.title %}
          {% include task-card.html task=task %}
      {% endcase %}
      </a>
    {% break %}
  {%- endif -%}
{% endfor %}